{% extends "dc_base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}CCH{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>数据读取</h1>
</div>
<div class="panel panel-default">
    <div class="panel-heading"><h4>输入参数</h4></div>
    <div class="panel-body">{{ wtf.quick_form(form, form_type="horizontal", horizontal_columns=('sm',2,5)) }}</div>
</div>
{% if df_l %}
<div class="panel panel-info">
    <div class="panel-heading"><h4>数据读取结果</h4></div>
    <table class='table table-striped table-scrollable'> 
        <thead>
            <tr>
                <th>数据名称</th>
                <th>数据维度</th>
            </tr>
        </thead>
        <tbody>
        {% for df in df_l %}
        <tr>
            <td>{{ df[0] }}</td>
            <td>{{ df[1].shape }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<div class="panel-group" id="accordion">
    {% for df in df_l %}
        <div class="panel panel-info">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" href="#collapse{{ df[0] }}">{{ df[0] }}数据预览</a>
                </h4>
            </div>
            <div id="collapse{{ df[0] }}" class="panel-collapse collapse">
                <div class="panel-body" style="overflow-y: scroll;">
                    <table class='table table-striped'>{{ df[1].head(n=20).to_html()|safe }}</table>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
